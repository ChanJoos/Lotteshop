<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fis.carte.input.dao.CarteInputDAO">
  <cache />
    <!-- 
  	<![CDATA[ ]]> 
   -->
   
<!-- 
<select id="selectList"  parameterType="carteVO" resultType="baseMap" >

</select>
 -->
 
 <!-- 
<select id="selectList" resultType="carteVO">
	SELECT 
	DATE, CARTE_TYPE, MENU1, MENU2, MENU3, MENU4, MENU5, MENU6
	, MENU7, MENU8, MENU9
	FROM [dbo].[FIS_CARTE_TB]
	WHERE DATE = #{DATE} AND CARTE_TYPE = #{CARTE_TYPE}
</select>
 -->
 
 <!-- 
 <select id="selectList" resultType="com.vo.CarteVO">
	SELECT 
	DATE, CARTE_TYPE, MENU1, MENU2, MENU3, MENU4, MENU5, MENU6
	, MENU7, MENU8, MENU9
	FROM [dbo].[FIS_CARTE_TB]
	WHERE DATE >= #{startDate} AND #{endDate} >= DATE
	
</select>
 -->

 <select id="selectList" resultType="baseMap">
	SELECT 
	DATE, CARTE_TYPE, MENU1, MENU2, MENU3, MENU4, MENU5, MENU6
	, MENU7, MENU8, MENU9
	FROM [dbo].[FIS_CARTE_TB]
	WHERE DATE >= #{startDate} AND #{endDate} >= DATE
</select>

<delete id="deleteCarteRows" parameterType="String">
	DELETE FROM [dbo].[FIS_CARTE_TB]
	WHERE DATE >= #{startRow} AND #{endRow} >= DATE
</delete>
	
<insert id="insertCarteRow" parameterType="carteVO">
	INSERT INTO [dbo].[FIS_CARTE_TB] 
	(DATE, CARTE_TYPE, MENU1, MENU2, MENU3, MENU4, MENU5, MENU6
	, MENU7, MENU8, MENU9, CREATOR, CREATE_DATE, UPDATE_DATE)
	VALUES 
	(#{date}, #{carte_type}, #{menu1}, #{menu2}, #{menu3}, #{menu4}, #{menu5}, #{menu6}
	, #{menu7}, #{menu8}, #{menu9}, #{creator}, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
</insert>

<select id="selectDateDiff" resultType="Integer">
	SELECT DATEDIFF( DD, #{criteriaDate}, #{inputDate} )
</select>
 
 <!-- 동적 SQL 활용 부분 -->
<!-- 
<insert id="insertList" parameterType="carteVO">

	<choose>
		<when test='menu1 == null'>
			INSERT INTO [dbo].[FIS_CARTE_TB] 
			(DATE, CARTE_TYPE, MENU1, MENU2, MENU3, MENU4, MENU5, MENU6
			, MENU7, MENU8, MENU9, CREATOR, CREATE_DATE, UPDATE_DATE)
			VALUES 
			(#{date}, #{carte_type}, #{menu1}, #{menu2}, #{menu3}, #{menu4}, #{menu5}, #{menu6}
			, #{menu7}, #{menu8}, #{menu9}, #{creator}, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
		</when>
		<when test='menu1 != null'>
			UPDATE [dbo].[FIS_CARTE_TB]
			SET 
			DATE =#{date}, CARTE_TYPE = #{carte_type}, MENU1 = #{menu1}, MENU2 = #{menu2}
			, MENU3 = #{menu3}, MENU4 = #{menu4}, MENU5 = #{menu5}, MENU6 = #{menu6}
			, MENU7 = #{menu7}, MENU8 = #{menu8}, MENU9 = #{menu9}, UPDATE_DATE = CURRENT_TIMESTAMP
		</when>
	</choose>
	
</insert>
 -->
 
 <!-- CONVERT(VARCHAR, GETDATE(), 112) 오늘 날짜 -->
 
 <!-- test -->
 <!-- 
 <insert id="insertList">
	INSERT INTO [dbo].[FIS_CARTE_TB] (DATE, CARTE_TYPE, MENU1, MENU2, MENU3, MENU4, MENU5, MENU6
	, MENU7, MENU8, MENU9, CREATOR, CREATE_DATE, UPDATE_DATE)
	VALUES (GETDATE(), 'DN', 'test', 'test', 'test', 'test', 'test', 'test'
	, 'test', 'test', 'test', '2120091', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
</insert>
-->

</mapper>